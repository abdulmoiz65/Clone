<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>University Chatbot</title>
    <!-- Bootstrap CSS for styling and responsiveness -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Custom CSS for chat window and messages */
        .chat-window {
            height: 400px; /* Fixed height for chat area */
            overflow-y: auto; /* Scrollbar for long conversations */
            border: 1px solid #ccc; /* Light border for chat window */
            padding: 10px; /* Padding inside chat window */
            background-color: #f8f9fa; /* Light background for better readability */
            display: flex;
            flex-direction: column;
        }
        .message-container {
            margin-bottom: 10px; /* Space between messages */
        }
        .bot-message {
            background-color: #e9ecef; /* Light gray for bot messages */
            color: #000; /* Black text for readability */
            padding: 10px; /* Padding inside message bubble */
            border-radius: 10px; /* Rounded corners for bubble effect */
            max-width: 80%; /* Limit width for better layout */
            margin-left: 0; /* Align bot messages to the left */
        }
        .user-message {
            background-color: #007bff; /* Blue for user messages */
            color: #fff; /* White text for contrast */
            padding: 10px; /* Padding inside message bubble */
            border-radius: 10px; /* Rounded corners for bubble effect */
            max-width: 80%; /* Limit width for better layout */
            margin-right: 0; /* Align user messages to the right */
            margin-left: auto; /* Push to the right */
        }
        .typing-indicator {
            font-style: italic;
            color: #6c757d; /* Gray color for typing indicator */
            margin-left: 10px; /* Align with bot messages */
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">University Chatbot</h2>
        <p class="text-center">Ask me anything about the university—I'll try to help like a smart assistant!</p>
        
        <!-- Chat window to display messages -->
        <div class="chat-window" id="chat-window">
            <!-- Initial welcome message will be added by JavaScript -->
        </div>
        
        <!-- Input area for user messages -->
        <div class="input-group mt-3">
            <input type="text" id="user-input" class="form-control" placeholder="Type your message and press Enter or click Send...">
            <button class="btn btn-primary" id="send-button">Send</button>
        </div>
    </div>

    <!-- JavaScript for chatbot logic -->
    <script>
        // Get DOM elements
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');

        // Predefined keywords and responses for university-related queries
        const responses = {
            admissions: ["admissions", "admission process", "apply", "enrollment"],
            courses: ["courses", "programs", "majors", "subjects"],
            fees: ["fees", "tuition", "cost", "payment"],
            events: ["events", "workshops", "seminars", "calendar"],
            contact: ["contact", "email", "phone", "help desk"],
            help: ["help", "assist", "what can you do"]
        };

        // More natural responses mapped to keywords
        const responseMessages = {
            admissions: "You can apply for admissions online via our website. Visit the admissions page for details, deadlines, and requirements. Do you have a specific question about it?",
            courses: "We offer courses in fields like Engineering, Arts, Science, and Business. Check our course catalog online. Which field are you interested in?",
            fees: "Tuition fees vary by program and can be found on our fees page. Scholarships and payment plans are available—would you like more details?",
            events: "Upcoming events include workshops, seminars, and sports. Visit the events calendar on our portal. Is there a specific event you're curious about?",
            contact: "For queries, email us at info@university.edu or call +123-456-7890. How else can I assist?",
            help: "I'm here to help with university-related questions! Try asking about admissions, courses, fees, or events. What would you like to know?",
            default: "I'm not entirely sure about that. Could you clarify or ask about something like admissions, courses, fees, or events?"
        };

        // Variable to store context (e.g., last topic discussed)
        let lastTopic = null;

        // Function to add a message to the chat window
        function addMessage(sender, message) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message-container');

            const bubbleElement = document.createElement('div');
            bubbleElement.textContent = message;

            if (sender === 'bot') {
                bubbleElement.classList.add('bot-message');
            } else {
                bubbleElement.classList.add('user-message');
            }

            messageElement.appendChild(bubbleElement);
            chatWindow.appendChild(messageElement);
            chatWindow.scrollTop = chatWindow.scrollHeight; // Scroll to bottom
        }

        // Function to show typing indicator
        function showTypingIndicator() {
            const typingElement = document.createElement('div');
            typingElement.classList.add('message-container', 'typing-indicator');
            typingElement.textContent = "Bot is typing...";
            chatWindow.appendChild(typingElement);
            chatWindow.scrollTop = chatWindow.scrollHeight; // Scroll to bottom
            return typingElement; // Return for later removal
        }

        // Function to remove typing indicator
        function removeTypingIndicator(element) {
            if (element && element.parentNode) {
                element.parentNode.removeChild(element);
            }
        }

        // Function to handle bot response based on user input with better matching
        function getBotResponse(userMessage) {
            const lowerCaseMessage = userMessage.trim().toLowerCase();

            // Check for keywords in the message (more flexible matching)
            for (const topic in responses) {
                if (responses[topic].some(keyword => lowerCaseMessage.includes(keyword))) {
                    lastTopic = topic; // Set context for follow-up
                    return responseMessages[topic];
                }
            }

            // If no match, use context from last topic or default response
            if (lastTopic) {
                return `Since we were talking about ${lastTopic}, did you mean something related? Otherwise, ${responseMessages.default}`;
            } else {
                return responseMessages.default;
            }
        }

        // Add initial welcome message from bot
        addMessage('bot', "Hello! I'm the University Chatbot, here to help with your university queries. Ask me anything about admissions, courses, fees, or more!");

        // Event listener for send button
        sendButton.addEventListener('click', function() {
            const userMessageText = userInput.value;
            if (userMessageText.trim() !== '') {
                // Add user message
                addMessage('user', userMessageText);
                
                // Clear input field
                userInput.value = '';
                
                // Show typing indicator
                const typingElement = showTypingIndicator();
                
                // Simulate a delay for "thinking" (like ChatGPT)
                setTimeout(() => {
                    removeTypingIndicator(typingElement); // Remove typing indicator
                    const botResponse = getBotResponse(userMessageText);
                    addMessage('bot', botResponse); // Add bot response
                }, 1000); // 1-second delay for realism
            }
        });

        // Event listener for Enter key in input field
        userInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                sendButton.click(); // Simulate click on send button
            }
        });
    </script>
</body>
</html>

### How This is Better:
- **Flexible Matching**: Now, the bot can understand phrases like "how to apply" or "course details" by checking for keywords, making it feel more conversational.
- **Context Awareness**: It remembers the last topic (e.g., if you ask about admissions, a follow-up question might reference it).
- **Typing Indicator**: Adds a "Bot is typing..." animation to mimic ChatGPT's response delay, improving user experience.
- **No External Dependencies**: Still uses only HTML, CSS, JS, and Bootstrap, so it works offline.

### Testing It:
1. Save the code as an HTML file.
2. Open it in a browser.
3. Try queries like:
   - "Tell me about admissions" → Should respond with admissions info.
   - "What about fees?" → Should handle it based on keyword matching.
   - "I'm not sure, help me" → Should use the help response.
   - Something unrelated, like "weather" → Should fall back to a default response with context if available.

### Still Not Like ChatGPT?
ChatGPT uses advanced AI to understand context, generate creative responses, and handle complex queries. This version is an improvement but remains rule-based. To make it truly AI-like:

1. **Integrate an AI API**: Use OpenAI's API (or a similar service like Hugging Face). Here's a quick guide to add it:
   - Sign up for an API key from OpenAI (openai.com).
   - Modify the JavaScript to send requests to the API. Example update to `getBotResponse`:
     ```javascript
     async function getBotResponse(userMessage) {
         try {
             const response = await fetch('https://api.openai.com/v1/chat/completions', {
                 method: 'POST',
                 headers: {
                     'Content-Type': 'application/json',
                     'Authorization': 'Bearer YOUR_API_KEY' // Replace with your API key
                 },
                 body: JSON.stringify({
                     model: 'gpt-3.5-turbo',
                     messages: [{ role: 'user', content: userMessage }]
                 })
             });
             const data = await response.json();
             return data.choices[0].message.content; // Get the AI-generated response
         } catch (error) {
             return "Sorry, I had trouble connecting to the AI service. Please try again later.";
         }
     }
     ```
     - In the send button event, make the bot response async:
       ```javascript
       setTimeout(async () => {
           removeTypingIndicator(typingElement);
           const botResponse = await getBotResponse(userMessageText); // Await the async function
           addMessage('bot', botResponse);
       }, 1000);
       ```
     - **Important**: Never expose your API key in client-side code for security reasons. Use a backend server (e.g., Node.js) to handle API calls.

2. **Why This is Better for Now**: This enhanced version is simple, fast, and works within your specified tech stack. If you want to proceed with API integration or need more features, let me know—I can help refine it further!